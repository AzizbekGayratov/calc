<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/TabIcon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <link rel="stylesheet" href="./src/stylesheets/style.css" />
  </head>
  <body>
    <div class="container">
      <div class="wrapper">
        <p class="result_wrapper">
          <input type="text" id="wrapper" placeholder="0" readonly disabled />
        </p>
        <div class="buttons_wrapper">
          <button onclick="clearAll()" class="btn top_btn">C</button>
          <button onclick="changeSign()" class="btn top_btn">
            <img src="./src/assets/plusMinus.svg" alt="plus/minus icon" />
          </button>
          <button onclick="percentage()" class="btn top_btn">%</button>
          <button onclick="append('/')" class="btn right_btn">รท</button>
          <button onclick="append('7')" class="btn">7</button>
          <button onclick="append('8')" class="btn">8</button>
          <button onclick="append('9')" class="btn">9</button>
          <button onclick="append('*')" class="btn right_btn">x</button>
          <button onclick="append('4')" class="btn">4</button>
          <button onclick="append('5')" class="btn">5</button>
          <button onclick="append('6')" class="btn">6</button>
          <button onclick="append('-')" class="btn right_btn">-</button>
          <button onclick="append('1')" class="btn">1</button>
          <button onclick="append('2')" class="btn">2</button>
          <button onclick="append('3')" class="btn">3</button>
          <button onclick="append('+')" class="btn right_btn">+</button>
          <button onclick="append('.')" class="btn">.</button>
          <button onclick="append('0')" class="btn">0</button>
          <button onclick="del()" class="btn">
            <img src="./src/assets/del.svg" alt="delete icon" />
          </button>
          <button onclick="calculate()" class="btn right_btn">=</button>
        </div>
      </div>
    </div>

    <script>
      const wrapper = document.getElementById("wrapper");

      const append = (value) => {
        wrapper.value += value;
      };

      const calculate = () => {
        try {
          wrapper.value = eval(wrapper.value);
        } catch (error) {
          wrapper.value = "This is not a valid expression";
        }
      };

      const clearAll = () => {
        wrapper.value = "";
      };

      const del = () => {
        wrapper.value = wrapper.value.slice(0, -1);
      };

      const changeSign = () => {
        if (wrapper.value) {
          wrapper.value *= -1;
        }
      };

      const percentage = () => {
        if (wrapper.value) {
          wrapper.value = wrapper.value / 100;
        }
      };

      window.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          calculate();
        } else if (event.key === "Backspace") {
          del();
        } else if (event.key === "c" || event.key === "C") {
          clearAll();
        } else if (
          event.key === "1" ||
          event.key === "2" ||
          event.key === "3" ||
          event.key === "4" ||
          event.key === "5" ||
          event.key === "6" ||
          event.key === "7" ||
          event.key === "8" ||
          event.key === "9" ||
          event.key === "0" ||
          event.key === "." ||
          event.key === "-" ||
          event.key === "+" ||
          event.key === "*" ||
          event.key === "/"
        ) {
          append(event.key);
        } else if (event.key === "%") {
          percentage();
        }
      });
    </script>
  </body>
</html>
